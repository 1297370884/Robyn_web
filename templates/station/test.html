<script>
success: function (response, status, xhr) {
  console.log("成功回调：", response);
  if (response.message === "登录成功") {
    console.log("登录成功");
    alert(response.message);
    
    // 从响应头获取token
    const token = xhr.getResponseHeader('Authorization');
    if (token) {
      localStorage.setItem('token', token.replace('Bearer ', ''));
    }
    
    // 修改这里：使用 fetch 或 axios 替代直接跳转
    setTimeout(function () {
      // 使用fetch发送请求
      fetch('/personal', {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        }
      })
      .then(response => {
        if (response.ok) {
          window.location.href = "personal";
        } else {
          throw new Error('Failed to access personal page');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('访问个人页面失败，请重新登录');
      });
    }, 600);
  } else {
    alert(response.message || "登录失败");
    console.error("登录失败，返回数据：", response);
  }
},


</script>